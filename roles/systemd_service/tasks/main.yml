---
# Systemd service role

- name: Install systemd unit for {{ service_name }}
  become: true
  ansible.builtin.template:
    src: service.j2
    dest: "/etc/systemd/system/{{ service_name }}.service"
    mode: "0644"
  notify: Reload systemd

- name: Ensure {{ service_name }} service is running
  become: true
  ansible.builtin.systemd_service:
    name: "{{ service_name }}"
    daemon_reload: true
    enabled: "{{ service_enabled }}"
    state: "{{ service_state }}"
